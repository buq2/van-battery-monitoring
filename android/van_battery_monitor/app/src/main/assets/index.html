<!DOCTYPE html>
<html lang="en">
<head>
    <script src='file:///android_asset/plotly-latest.min.js'></script>
    <style>
        .message {
           animation: fadeOut 2s forwards;
           animation-delay: 0.5s;
           text-align: center;
        }

        @keyframes fadeOut {
            from {opacity: 1;}
            to {opacity: 0;}
        }

    </style>
</head>
<body>
<div>
    <div id='divGauges'>Waiting data from Bluetooth</div>
    <div class="message" id='message'></div>
</div>
<script type="text/javascript">
    function reset_animation() {
        var el = document.getElementById('message');
        el.style.animation = 'none';
        el.offsetHeight; /* trigger reflow */
        el.style.animation = null;
    }

    function displayData(data) {
        console.log(data);
        data = JSON.parse(data);

        var data1 = [
        {
            domain: { row:0, column:0},
            value: data["battery"]["power_w"],
            title: { text: "Power" },
            type: "indicator",
            mode: "gauge+number",
            gauge: {
              axis: { range: [null, 100] },
            }
        },{
            domain: { row:1, column:0},
            value: data["battery"]["current_a"],
            title: { text: "Current" },
            type: "indicator",
            mode: "gauge+number",
            gauge: {
              axis: { range: [null, 10] },
            }
        }
    ];

        var layout = {
            margin: { t: 0, b: 0 },
            grid: { rows: 2, columns: 1},
           };
        var config = {responsive: true}
        document.getElementById("divGauges").innerHTML = "";
        Plotly.newPlot('divGauges', data1, layout, config);

        // "Flash" updated
        document.getElementById("message").innerHTML = "Updated";
        reset_animation();
    }




</script>
</body>
</html>